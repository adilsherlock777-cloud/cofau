{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"createPost\", {\n    enumerable: true,\n    get: function () {\n      return createPost;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var API_BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://food-app-debug.preview.emergentagent.com';\n  var API_URL = `${API_BASE_URL}/api`;\n\n  // Create axios instance\n  var api = axios.default.create({\n    baseURL: API_URL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Note: Authorization header is set globally in AuthContext after login\n  // via axios.defaults.headers.common['Authorization']\n\n  /**\n   * Create a new post with image upload\n   * @param {Object} postData - Post data (rating, review_text, map_link, file)\n   * @returns {Promise} - API response\n   */\n  var createPost = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* (postData) {\n      try {\n        var formData = new FormData();\n\n        // Append form fields\n        formData.append('rating', postData.rating);\n        formData.append('review_text', postData.review_text);\n        if (postData.map_link) {\n          formData.append('map_link', postData.map_link);\n        }\n\n        // Append file - handle both web and native\n        if (postData.file) {\n          // For web: postData.file is a File object\n          // For native: postData.file is an object with uri, name, type\n          if (postData.file.uri) {\n            // React Native\n            var fileUri = postData.file.uri;\n            var filename = postData.file.name || fileUri.split('/').pop();\n            var fileType = postData.file.type || 'image/jpeg';\n            formData.append('file', {\n              uri: fileUri,\n              name: filename,\n              type: fileType\n            });\n          } else {\n            // Web - File object\n            formData.append('file', postData.file);\n          }\n        }\n        console.log('üì§ Creating post with data:', {\n          rating: postData.rating,\n          review_text: postData.review_text,\n          map_link: postData.map_link,\n          file: postData.file?.name || postData.file?.uri || 'unknown'\n        });\n        var response = yield axios.default.post(`${API_URL}/posts/create`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Authorization': axios.default.defaults.headers.common['Authorization']\n          }\n        });\n        console.log('‚úÖ Post created successfully:', response.data);\n        return response.data;\n      } catch (error) {\n        console.error('‚ùå Error creating post:', error.response?.data || error.message);\n        throw error;\n      }\n    });\n    return function createPost(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var _default = api;\n});","lineCount":103,"map":[[12,2,76,0,"Object"],[12,8,76,0],[12,9,76,0,"defineProperty"],[12,23,76,0],[12,24,76,0,"exports"],[12,31,76,0],[13,4,76,0,"enumerable"],[13,14,76,0],[14,4,76,0,"get"],[14,7,76,0],[14,18,76,0,"get"],[14,19,76,0],[15,6,76,0],[15,13,76,0,"_default"],[15,21,76,0],[16,4,76,0],[17,2,76,0],[18,2,22,0,"Object"],[18,8,22,0],[18,9,22,0,"defineProperty"],[18,23,22,0],[18,24,22,0,"exports"],[18,31,22,0],[19,4,22,0,"enumerable"],[19,14,22,0],[20,4,22,0,"get"],[20,7,22,0],[20,18,22,0,"get"],[20,19,22,0],[21,6,22,0],[21,13,22,0,"createPost"],[21,23,22,0],[22,4,22,0],[23,2,22,0],[24,2,74,2],[24,6,74,2,"_babelRuntimeHelpersAsyncToGenerator"],[24,42,74,2],[24,45,74,2,"require"],[24,52,74,2],[24,53,74,2,"_dependencyMap"],[24,67,74,2],[25,2,74,2],[25,6,74,2,"_asyncToGenerator"],[25,23,74,2],[25,26,74,2,"_interopDefault"],[25,41,74,2],[25,42,74,2,"_babelRuntimeHelpersAsyncToGenerator"],[25,78,74,2],[26,2,74,2],[26,6,74,2,"_expoVirtualEnv"],[26,21,74,2],[26,24,74,2,"require"],[26,31,74,2],[26,32,74,2,"_dependencyMap"],[26,46,74,2],[27,2,1,0],[27,6,1,0,"_axios"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,1,0],[28,6,1,0,"axios"],[28,11,1,0],[28,14,1,0,"_interopDefault"],[28,29,1,0],[28,30,1,0,"_axios"],[28,36,1,0],[29,2,3,0],[29,6,3,6,"API_BASE_URL"],[29,18,3,18],[29,21,3,21,"_expoVirtualEnv"],[29,36,3,21],[29,37,3,21,"env"],[29,40,3,21],[29,41,3,21,"EXPO_PUBLIC_BACKEND_URL"],[29,64,3,21],[29,68,3,60],[29,118,3,110],[30,2,4,0],[30,6,4,6,"API_URL"],[30,13,4,13],[30,16,4,16],[30,19,4,19,"API_BASE_URL"],[30,31,4,31],[30,37,4,37],[32,2,6,0],[33,2,7,0],[33,6,7,6,"api"],[33,9,7,9],[33,12,7,12,"axios"],[33,17,7,17],[33,18,7,17,"default"],[33,25,7,17],[33,26,7,18,"create"],[33,32,7,24],[33,33,7,25],[34,4,8,2,"baseURL"],[34,11,8,9],[34,13,8,11,"API_URL"],[34,20,8,18],[35,4,9,2,"headers"],[35,11,9,9],[35,13,9,11],[36,6,10,4],[36,20,10,18],[36,22,10,20],[37,4,11,2],[38,2,12,0],[38,3,12,1],[38,4,12,2],[40,2,14,0],[41,2,15,0],[43,2,17,0],[44,0,18,0],[45,0,19,0],[46,0,20,0],[47,0,21,0],[48,2,22,7],[48,6,22,13,"createPost"],[48,16,22,23],[49,4,22,23],[49,8,22,23,"_ref"],[49,12,22,23],[49,19,22,23,"_asyncToGenerator"],[49,36,22,23],[49,37,22,23,"default"],[49,44,22,23],[49,46,22,26],[49,57,22,33,"postData"],[49,65,22,41],[49,67,22,46],[50,6,23,2],[50,10,23,6],[51,8,24,4],[51,12,24,10,"formData"],[51,20,24,18],[51,23,24,21],[51,27,24,25,"FormData"],[51,35,24,33],[51,36,24,34],[51,37,24,35],[53,8,26,4],[54,8,27,4,"formData"],[54,16,27,12],[54,17,27,13,"append"],[54,23,27,19],[54,24,27,20],[54,32,27,28],[54,34,27,30,"postData"],[54,42,27,38],[54,43,27,39,"rating"],[54,49,27,45],[54,50,27,46],[55,8,28,4,"formData"],[55,16,28,12],[55,17,28,13,"append"],[55,23,28,19],[55,24,28,20],[55,37,28,33],[55,39,28,35,"postData"],[55,47,28,43],[55,48,28,44,"review_text"],[55,59,28,55],[55,60,28,56],[56,8,29,4],[56,12,29,8,"postData"],[56,20,29,16],[56,21,29,17,"map_link"],[56,29,29,25],[56,31,29,27],[57,10,30,6,"formData"],[57,18,30,14],[57,19,30,15,"append"],[57,25,30,21],[57,26,30,22],[57,36,30,32],[57,38,30,34,"postData"],[57,46,30,42],[57,47,30,43,"map_link"],[57,55,30,51],[57,56,30,52],[58,8,31,4],[60,8,33,4],[61,8,34,4],[61,12,34,8,"postData"],[61,20,34,16],[61,21,34,17,"file"],[61,25,34,21],[61,27,34,23],[62,10,35,6],[63,10,36,6],[64,10,37,6],[64,14,37,10,"postData"],[64,22,37,18],[64,23,37,19,"file"],[64,27,37,23],[64,28,37,24,"uri"],[64,31,37,27],[64,33,37,29],[65,12,38,8],[66,12,39,8],[66,16,39,14,"fileUri"],[66,23,39,21],[66,26,39,24,"postData"],[66,34,39,32],[66,35,39,33,"file"],[66,39,39,37],[66,40,39,38,"uri"],[66,43,39,41],[67,12,40,8],[67,16,40,14,"filename"],[67,24,40,22],[67,27,40,25,"postData"],[67,35,40,33],[67,36,40,34,"file"],[67,40,40,38],[67,41,40,39,"name"],[67,45,40,43],[67,49,40,47,"fileUri"],[67,56,40,54],[67,57,40,55,"split"],[67,62,40,60],[67,63,40,61],[67,66,40,64],[67,67,40,65],[67,68,40,66,"pop"],[67,71,40,69],[67,72,40,70],[67,73,40,71],[68,12,41,8],[68,16,41,14,"fileType"],[68,24,41,22],[68,27,41,25,"postData"],[68,35,41,33],[68,36,41,34,"file"],[68,40,41,38],[68,41,41,39,"type"],[68,45,41,43],[68,49,41,47],[68,61,41,59],[69,12,43,8,"formData"],[69,20,43,16],[69,21,43,17,"append"],[69,27,43,23],[69,28,43,24],[69,34,43,30],[69,36,43,32],[70,14,44,10,"uri"],[70,17,44,13],[70,19,44,15,"fileUri"],[70,26,44,22],[71,14,45,10,"name"],[71,18,45,14],[71,20,45,16,"filename"],[71,28,45,24],[72,14,46,10,"type"],[72,18,46,14],[72,20,46,16,"fileType"],[73,12,47,8],[73,13,47,9],[73,14,47,10],[74,10,48,6],[74,11,48,7],[74,17,48,13],[75,12,49,8],[76,12,50,8,"formData"],[76,20,50,16],[76,21,50,17,"append"],[76,27,50,23],[76,28,50,24],[76,34,50,30],[76,36,50,32,"postData"],[76,44,50,40],[76,45,50,41,"file"],[76,49,50,45],[76,50,50,46],[77,10,51,6],[78,8,52,4],[79,8,54,4,"console"],[79,15,54,11],[79,16,54,12,"log"],[79,19,54,15],[79,20,54,16],[79,49,54,45],[79,51,54,47],[80,10,55,6,"rating"],[80,16,55,12],[80,18,55,14,"postData"],[80,26,55,22],[80,27,55,23,"rating"],[80,33,55,29],[81,10,56,6,"review_text"],[81,21,56,17],[81,23,56,19,"postData"],[81,31,56,27],[81,32,56,28,"review_text"],[81,43,56,39],[82,10,57,6,"map_link"],[82,18,57,14],[82,20,57,16,"postData"],[82,28,57,24],[82,29,57,25,"map_link"],[82,37,57,33],[83,10,58,6,"file"],[83,14,58,10],[83,16,58,12,"postData"],[83,24,58,20],[83,25,58,21,"file"],[83,29,58,25],[83,31,58,27,"name"],[83,35,58,31],[83,39,58,35,"postData"],[83,47,58,43],[83,48,58,44,"file"],[83,52,58,48],[83,54,58,50,"uri"],[83,57,58,53],[83,61,58,57],[84,8,59,4],[84,9,59,5],[84,10,59,6],[85,8,61,4],[85,12,61,10,"response"],[85,20,61,18],[85,29,61,27,"axios"],[85,34,61,32],[85,35,61,32,"default"],[85,42,61,32],[85,43,61,33,"post"],[85,47,61,37],[85,48,61,38],[85,51,61,41,"API_URL"],[85,58,61,48],[85,73,61,63],[85,75,61,65,"formData"],[85,83,61,73],[85,85,61,75],[86,10,62,6,"headers"],[86,17,62,13],[86,19,62,15],[87,12,63,8],[87,26,63,22],[87,28,63,24],[87,49,63,45],[88,12,64,8],[88,27,64,23],[88,29,64,25,"axios"],[88,34,64,30],[88,35,64,30,"default"],[88,42,64,30],[88,43,64,31,"defaults"],[88,51,64,39],[88,52,64,40,"headers"],[88,59,64,47],[88,60,64,48,"common"],[88,66,64,54],[88,67,64,55],[88,82,64,70],[89,10,65,6],[90,8,66,4],[90,9,66,5],[90,10,66,6],[91,8,68,4,"console"],[91,15,68,11],[91,16,68,12,"log"],[91,19,68,15],[91,20,68,16],[91,50,68,46],[91,52,68,48,"response"],[91,60,68,56],[91,61,68,57,"data"],[91,65,68,61],[91,66,68,62],[92,8,69,4],[92,15,69,11,"response"],[92,23,69,19],[92,24,69,20,"data"],[92,28,69,24],[93,6,70,2],[93,7,70,3],[93,8,70,4],[93,15,70,11,"error"],[93,20,70,16],[93,22,70,18],[94,8,71,4,"console"],[94,15,71,11],[94,16,71,12,"error"],[94,21,71,17],[94,22,71,18],[94,46,71,42],[94,48,71,44,"error"],[94,53,71,49],[94,54,71,50,"response"],[94,62,71,58],[94,64,71,60,"data"],[94,68,71,64],[94,72,71,68,"error"],[94,77,71,73],[94,78,71,74,"message"],[94,85,71,81],[94,86,71,82],[95,8,72,4],[95,14,72,10,"error"],[95,19,72,15],[96,6,73,2],[97,4,74,0],[97,5,74,1],[98,4,74,1],[98,20,22,13,"createPost"],[98,30,22,23,"createPost"],[98,31,22,23,"_x"],[98,33,22,23],[99,6,22,23],[99,13,22,23,"_ref"],[99,17,22,23],[99,18,22,23,"apply"],[99,23,22,23],[99,30,22,23,"arguments"],[99,39,22,23],[100,4,22,23],[101,2,22,23],[101,5,74,1],[102,2,76,0],[102,6,76,0,"_default"],[102,14,76,0],[102,17,76,15,"api"],[102,20,76,18],[103,0,76,19],[103,3]],"functionMap":{"names":["<global>","createPost"],"mappings":"AAA;0BCqB;CDoD"},"hasCjsExports":false},"type":"js/module"}]}