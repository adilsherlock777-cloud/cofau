{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"createPost\", {\n    enumerable: true,\n    get: function () {\n      return createPost;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  const API_BASE_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || 'https://food-app-debug.preview.emergentagent.com';\n  const API_URL = `${API_BASE_URL}/api`;\n\n  // Create axios instance\n  const api = axios.default.create({\n    baseURL: API_URL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Note: Authorization header is set globally in AuthContext after login\n  // via axios.defaults.headers.common['Authorization']\n\n  /**\n   * Create a new post with image upload\n   * @param {Object} postData - Post data (rating, review_text, map_link, file)\n   * @returns {Promise} - API response\n   */\n  const createPost = async postData => {\n    try {\n      const formData = new FormData();\n\n      // Append form fields\n      formData.append('rating', postData.rating);\n      formData.append('review_text', postData.review_text);\n      if (postData.map_link) {\n        formData.append('map_link', postData.map_link);\n      }\n\n      // Append file - handle both web and native\n      if (postData.file) {\n        // For web: postData.file is a File object\n        // For native: postData.file is an object with uri, name, type\n        if (postData.file.uri) {\n          // React Native\n          const fileUri = postData.file.uri;\n          const filename = postData.file.name || fileUri.split('/').pop();\n          const fileType = postData.file.type || 'image/jpeg';\n          formData.append('file', {\n            uri: fileUri,\n            name: filename,\n            type: fileType\n          });\n        } else {\n          // Web - File object\n          formData.append('file', postData.file);\n        }\n      }\n      console.log('üì§ Creating post with data:', {\n        rating: postData.rating,\n        review_text: postData.review_text,\n        map_link: postData.map_link,\n        file: postData.file?.name || postData.file?.uri || 'unknown'\n      });\n      const response = await axios.default.post(`${API_URL}/posts/create`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': axios.default.defaults.headers.common['Authorization']\n        }\n      });\n      console.log('‚úÖ Post created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå Error creating post:', error.response?.data || error.message);\n      throw error;\n    }\n  };\n  var _default = api;\n});","lineCount":96,"map":[[12,2,76,0,"Object"],[12,8,76,0],[12,9,76,0,"defineProperty"],[12,23,76,0],[12,24,76,0,"exports"],[12,31,76,0],[13,4,76,0,"enumerable"],[13,14,76,0],[14,4,76,0,"get"],[14,7,76,0],[14,18,76,0,"get"],[14,19,76,0],[15,6,76,0],[15,13,76,0,"_default"],[15,21,76,0],[16,4,76,0],[17,2,76,0],[18,2,22,0,"Object"],[18,8,22,0],[18,9,22,0,"defineProperty"],[18,23,22,0],[18,24,22,0,"exports"],[18,31,22,0],[19,4,22,0,"enumerable"],[19,14,22,0],[20,4,22,0,"get"],[20,7,22,0],[20,18,22,0,"get"],[20,19,22,0],[21,6,22,0],[21,13,22,0,"createPost"],[21,23,22,0],[22,4,22,0],[23,2,22,0],[24,2,74,2],[24,6,74,2,"_expoVirtualEnv"],[24,21,74,2],[24,24,74,2,"require"],[24,31,74,2],[24,32,74,2,"_dependencyMap"],[24,46,74,2],[25,2,1,0],[25,6,1,0,"_axios"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,1,0],[26,6,1,0,"axios"],[26,11,1,0],[26,14,1,0,"_interopDefault"],[26,29,1,0],[26,30,1,0,"_axios"],[26,36,1,0],[27,2,3,0],[27,8,3,6,"API_BASE_URL"],[27,20,3,18],[27,23,3,21,"_expoVirtualEnv"],[27,38,3,21],[27,39,3,21,"env"],[27,42,3,21],[27,43,3,21,"EXPO_PUBLIC_BACKEND_URL"],[27,66,3,21],[27,70,3,60],[27,120,3,110],[28,2,4,0],[28,8,4,6,"API_URL"],[28,15,4,13],[28,18,4,16],[28,21,4,19,"API_BASE_URL"],[28,33,4,31],[28,39,4,37],[30,2,6,0],[31,2,7,0],[31,8,7,6,"api"],[31,11,7,9],[31,14,7,12,"axios"],[31,19,7,17],[31,20,7,17,"default"],[31,27,7,17],[31,28,7,18,"create"],[31,34,7,24],[31,35,7,25],[32,4,8,2,"baseURL"],[32,11,8,9],[32,13,8,11,"API_URL"],[32,20,8,18],[33,4,9,2,"headers"],[33,11,9,9],[33,13,9,11],[34,6,10,4],[34,20,10,18],[34,22,10,20],[35,4,11,2],[36,2,12,0],[36,3,12,1],[36,4,12,2],[38,2,14,0],[39,2,15,0],[41,2,17,0],[42,0,18,0],[43,0,19,0],[44,0,20,0],[45,0,21,0],[46,2,22,7],[46,8,22,13,"createPost"],[46,18,22,23],[46,21,22,26],[46,27,22,33,"postData"],[46,35,22,41],[46,39,22,46],[47,4,23,2],[47,8,23,6],[48,6,24,4],[48,12,24,10,"formData"],[48,20,24,18],[48,23,24,21],[48,27,24,25,"FormData"],[48,35,24,33],[48,36,24,34],[48,37,24,35],[50,6,26,4],[51,6,27,4,"formData"],[51,14,27,12],[51,15,27,13,"append"],[51,21,27,19],[51,22,27,20],[51,30,27,28],[51,32,27,30,"postData"],[51,40,27,38],[51,41,27,39,"rating"],[51,47,27,45],[51,48,27,46],[52,6,28,4,"formData"],[52,14,28,12],[52,15,28,13,"append"],[52,21,28,19],[52,22,28,20],[52,35,28,33],[52,37,28,35,"postData"],[52,45,28,43],[52,46,28,44,"review_text"],[52,57,28,55],[52,58,28,56],[53,6,29,4],[53,10,29,8,"postData"],[53,18,29,16],[53,19,29,17,"map_link"],[53,27,29,25],[53,29,29,27],[54,8,30,6,"formData"],[54,16,30,14],[54,17,30,15,"append"],[54,23,30,21],[54,24,30,22],[54,34,30,32],[54,36,30,34,"postData"],[54,44,30,42],[54,45,30,43,"map_link"],[54,53,30,51],[54,54,30,52],[55,6,31,4],[57,6,33,4],[58,6,34,4],[58,10,34,8,"postData"],[58,18,34,16],[58,19,34,17,"file"],[58,23,34,21],[58,25,34,23],[59,8,35,6],[60,8,36,6],[61,8,37,6],[61,12,37,10,"postData"],[61,20,37,18],[61,21,37,19,"file"],[61,25,37,23],[61,26,37,24,"uri"],[61,29,37,27],[61,31,37,29],[62,10,38,8],[63,10,39,8],[63,16,39,14,"fileUri"],[63,23,39,21],[63,26,39,24,"postData"],[63,34,39,32],[63,35,39,33,"file"],[63,39,39,37],[63,40,39,38,"uri"],[63,43,39,41],[64,10,40,8],[64,16,40,14,"filename"],[64,24,40,22],[64,27,40,25,"postData"],[64,35,40,33],[64,36,40,34,"file"],[64,40,40,38],[64,41,40,39,"name"],[64,45,40,43],[64,49,40,47,"fileUri"],[64,56,40,54],[64,57,40,55,"split"],[64,62,40,60],[64,63,40,61],[64,66,40,64],[64,67,40,65],[64,68,40,66,"pop"],[64,71,40,69],[64,72,40,70],[64,73,40,71],[65,10,41,8],[65,16,41,14,"fileType"],[65,24,41,22],[65,27,41,25,"postData"],[65,35,41,33],[65,36,41,34,"file"],[65,40,41,38],[65,41,41,39,"type"],[65,45,41,43],[65,49,41,47],[65,61,41,59],[66,10,43,8,"formData"],[66,18,43,16],[66,19,43,17,"append"],[66,25,43,23],[66,26,43,24],[66,32,43,30],[66,34,43,32],[67,12,44,10,"uri"],[67,15,44,13],[67,17,44,15,"fileUri"],[67,24,44,22],[68,12,45,10,"name"],[68,16,45,14],[68,18,45,16,"filename"],[68,26,45,24],[69,12,46,10,"type"],[69,16,46,14],[69,18,46,16,"fileType"],[70,10,47,8],[70,11,47,9],[70,12,47,10],[71,8,48,6],[71,9,48,7],[71,15,48,13],[72,10,49,8],[73,10,50,8,"formData"],[73,18,50,16],[73,19,50,17,"append"],[73,25,50,23],[73,26,50,24],[73,32,50,30],[73,34,50,32,"postData"],[73,42,50,40],[73,43,50,41,"file"],[73,47,50,45],[73,48,50,46],[74,8,51,6],[75,6,52,4],[76,6,54,4,"console"],[76,13,54,11],[76,14,54,12,"log"],[76,17,54,15],[76,18,54,16],[76,47,54,45],[76,49,54,47],[77,8,55,6,"rating"],[77,14,55,12],[77,16,55,14,"postData"],[77,24,55,22],[77,25,55,23,"rating"],[77,31,55,29],[78,8,56,6,"review_text"],[78,19,56,17],[78,21,56,19,"postData"],[78,29,56,27],[78,30,56,28,"review_text"],[78,41,56,39],[79,8,57,6,"map_link"],[79,16,57,14],[79,18,57,16,"postData"],[79,26,57,24],[79,27,57,25,"map_link"],[79,35,57,33],[80,8,58,6,"file"],[80,12,58,10],[80,14,58,12,"postData"],[80,22,58,20],[80,23,58,21,"file"],[80,27,58,25],[80,29,58,27,"name"],[80,33,58,31],[80,37,58,35,"postData"],[80,45,58,43],[80,46,58,44,"file"],[80,50,58,48],[80,52,58,50,"uri"],[80,55,58,53],[80,59,58,57],[81,6,59,4],[81,7,59,5],[81,8,59,6],[82,6,61,4],[82,12,61,10,"response"],[82,20,61,18],[82,23,61,21],[82,29,61,27,"axios"],[82,34,61,32],[82,35,61,32,"default"],[82,42,61,32],[82,43,61,33,"post"],[82,47,61,37],[82,48,61,38],[82,51,61,41,"API_URL"],[82,58,61,48],[82,73,61,63],[82,75,61,65,"formData"],[82,83,61,73],[82,85,61,75],[83,8,62,6,"headers"],[83,15,62,13],[83,17,62,15],[84,10,63,8],[84,24,63,22],[84,26,63,24],[84,47,63,45],[85,10,64,8],[85,25,64,23],[85,27,64,25,"axios"],[85,32,64,30],[85,33,64,30,"default"],[85,40,64,30],[85,41,64,31,"defaults"],[85,49,64,39],[85,50,64,40,"headers"],[85,57,64,47],[85,58,64,48,"common"],[85,64,64,54],[85,65,64,55],[85,80,64,70],[86,8,65,6],[87,6,66,4],[87,7,66,5],[87,8,66,6],[88,6,68,4,"console"],[88,13,68,11],[88,14,68,12,"log"],[88,17,68,15],[88,18,68,16],[88,48,68,46],[88,50,68,48,"response"],[88,58,68,56],[88,59,68,57,"data"],[88,63,68,61],[88,64,68,62],[89,6,69,4],[89,13,69,11,"response"],[89,21,69,19],[89,22,69,20,"data"],[89,26,69,24],[90,4,70,2],[90,5,70,3],[90,6,70,4],[90,13,70,11,"error"],[90,18,70,16],[90,20,70,18],[91,6,71,4,"console"],[91,13,71,11],[91,14,71,12,"error"],[91,19,71,17],[91,20,71,18],[91,44,71,42],[91,46,71,44,"error"],[91,51,71,49],[91,52,71,50,"response"],[91,60,71,58],[91,62,71,60,"data"],[91,66,71,64],[91,70,71,68,"error"],[91,75,71,73],[91,76,71,74,"message"],[91,83,71,81],[91,84,71,82],[92,6,72,4],[92,12,72,10,"error"],[92,17,72,15],[93,4,73,2],[94,2,74,0],[94,3,74,1],[95,2,76,0],[95,6,76,0,"_default"],[95,14,76,0],[95,17,76,15,"api"],[95,20,76,18],[96,0,76,19],[96,3]],"functionMap":{"names":["<global>","createPost"],"mappings":"AAA;0BCqB;CDoD"},"hasCjsExports":false},"type":"js/module"}]}