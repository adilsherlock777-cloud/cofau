{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"createPost\", {\n    enumerable: true,\n    get: function () {\n      return createPost;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  const API_BASE_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'https://food-app-debug.preview.emergentagent.com';\n  const API_URL = `${API_BASE_URL}/api`;\n\n  // Create axios instance\n  const api = axios.default.create({\n    baseURL: API_URL,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Note: Authorization header is set globally in AuthContext after login\n  // via axios.defaults.headers.common['Authorization']\n\n  /**\n   * Create a new post with image upload\n   * @param {Object} postData - Post data (rating, review_text, map_link, file)\n   * @returns {Promise} - API response\n   */\n  const createPost = async postData => {\n    try {\n      const formData = new FormData();\n\n      // Append form fields\n      formData.append('rating', postData.rating);\n      formData.append('review_text', postData.review_text);\n      if (postData.map_link) {\n        formData.append('map_link', postData.map_link);\n      }\n\n      // Append file - handle both web and native\n      if (postData.file) {\n        // For web: postData.file is a File object\n        // For native: postData.file is an object with uri, name, type\n        if (postData.file.uri) {\n          // React Native\n          const fileUri = postData.file.uri;\n          const filename = postData.file.name || fileUri.split('/').pop();\n          const fileType = postData.file.type || 'image/jpeg';\n          formData.append('file', {\n            uri: fileUri,\n            name: filename,\n            type: fileType\n          });\n        } else {\n          // Web - File object\n          formData.append('file', postData.file);\n        }\n      }\n      console.log('üì§ Creating post with data:', {\n        rating: postData.rating,\n        review_text: postData.review_text,\n        map_link: postData.map_link,\n        file: postData.file?.name || postData.file?.uri || 'unknown'\n      });\n      const response = await axios.default.post(`${API_URL}/posts/create`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Authorization': axios.default.defaults.headers.common['Authorization']\n        }\n      });\n      console.log('‚úÖ Post created successfully:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('‚ùå Error creating post:', error.response?.data || error.message);\n      throw error;\n    }\n  };\n  var _default = api;\n});","lineCount":95,"map":[[12,2,76,0,"Object"],[12,8,76,0],[12,9,76,0,"defineProperty"],[12,23,76,0],[12,24,76,0,"exports"],[12,31,76,0],[13,4,76,0,"enumerable"],[13,14,76,0],[14,4,76,0,"get"],[14,7,76,0],[14,18,76,0,"get"],[14,19,76,0],[15,6,76,0],[15,13,76,0,"_default"],[15,21,76,0],[16,4,76,0],[17,2,76,0],[18,2,22,0,"Object"],[18,8,22,0],[18,9,22,0,"defineProperty"],[18,23,22,0],[18,24,22,0,"exports"],[18,31,22,0],[19,4,22,0,"enumerable"],[19,14,22,0],[20,4,22,0,"get"],[20,7,22,0],[20,18,22,0,"get"],[20,19,22,0],[21,6,22,0],[21,13,22,0,"createPost"],[21,23,22,0],[22,4,22,0],[23,2,22,0],[24,2,1,0],[24,6,1,0,"_axios"],[24,12,1,0],[24,15,1,0,"require"],[24,22,1,0],[24,23,1,0,"_dependencyMap"],[24,37,1,0],[25,2,1,0],[25,6,1,0,"axios"],[25,11,1,0],[25,14,1,0,"_interopDefault"],[25,29,1,0],[25,30,1,0,"_axios"],[25,36,1,0],[26,2,3,0],[26,8,3,6,"API_BASE_URL"],[26,20,3,18],[26,23,3,21,"process"],[26,30,3,28],[26,31,3,29,"env"],[26,34,3,32],[26,35,3,33,"EXPO_PUBLIC_BACKEND_URL"],[26,58,3,56],[26,62,3,60],[26,112,3,110],[27,2,4,0],[27,8,4,6,"API_URL"],[27,15,4,13],[27,18,4,16],[27,21,4,19,"API_BASE_URL"],[27,33,4,31],[27,39,4,37],[29,2,6,0],[30,2,7,0],[30,8,7,6,"api"],[30,11,7,9],[30,14,7,12,"axios"],[30,19,7,17],[30,20,7,17,"default"],[30,27,7,17],[30,28,7,18,"create"],[30,34,7,24],[30,35,7,25],[31,4,8,2,"baseURL"],[31,11,8,9],[31,13,8,11,"API_URL"],[31,20,8,18],[32,4,9,2,"headers"],[32,11,9,9],[32,13,9,11],[33,6,10,4],[33,20,10,18],[33,22,10,20],[34,4,11,2],[35,2,12,0],[35,3,12,1],[35,4,12,2],[37,2,14,0],[38,2,15,0],[40,2,17,0],[41,0,18,0],[42,0,19,0],[43,0,20,0],[44,0,21,0],[45,2,22,7],[45,8,22,13,"createPost"],[45,18,22,23],[45,21,22,26],[45,27,22,33,"postData"],[45,35,22,41],[45,39,22,46],[46,4,23,2],[46,8,23,6],[47,6,24,4],[47,12,24,10,"formData"],[47,20,24,18],[47,23,24,21],[47,27,24,25,"FormData"],[47,35,24,33],[47,36,24,34],[47,37,24,35],[49,6,26,4],[50,6,27,4,"formData"],[50,14,27,12],[50,15,27,13,"append"],[50,21,27,19],[50,22,27,20],[50,30,27,28],[50,32,27,30,"postData"],[50,40,27,38],[50,41,27,39,"rating"],[50,47,27,45],[50,48,27,46],[51,6,28,4,"formData"],[51,14,28,12],[51,15,28,13,"append"],[51,21,28,19],[51,22,28,20],[51,35,28,33],[51,37,28,35,"postData"],[51,45,28,43],[51,46,28,44,"review_text"],[51,57,28,55],[51,58,28,56],[52,6,29,4],[52,10,29,8,"postData"],[52,18,29,16],[52,19,29,17,"map_link"],[52,27,29,25],[52,29,29,27],[53,8,30,6,"formData"],[53,16,30,14],[53,17,30,15,"append"],[53,23,30,21],[53,24,30,22],[53,34,30,32],[53,36,30,34,"postData"],[53,44,30,42],[53,45,30,43,"map_link"],[53,53,30,51],[53,54,30,52],[54,6,31,4],[56,6,33,4],[57,6,34,4],[57,10,34,8,"postData"],[57,18,34,16],[57,19,34,17,"file"],[57,23,34,21],[57,25,34,23],[58,8,35,6],[59,8,36,6],[60,8,37,6],[60,12,37,10,"postData"],[60,20,37,18],[60,21,37,19,"file"],[60,25,37,23],[60,26,37,24,"uri"],[60,29,37,27],[60,31,37,29],[61,10,38,8],[62,10,39,8],[62,16,39,14,"fileUri"],[62,23,39,21],[62,26,39,24,"postData"],[62,34,39,32],[62,35,39,33,"file"],[62,39,39,37],[62,40,39,38,"uri"],[62,43,39,41],[63,10,40,8],[63,16,40,14,"filename"],[63,24,40,22],[63,27,40,25,"postData"],[63,35,40,33],[63,36,40,34,"file"],[63,40,40,38],[63,41,40,39,"name"],[63,45,40,43],[63,49,40,47,"fileUri"],[63,56,40,54],[63,57,40,55,"split"],[63,62,40,60],[63,63,40,61],[63,66,40,64],[63,67,40,65],[63,68,40,66,"pop"],[63,71,40,69],[63,72,40,70],[63,73,40,71],[64,10,41,8],[64,16,41,14,"fileType"],[64,24,41,22],[64,27,41,25,"postData"],[64,35,41,33],[64,36,41,34,"file"],[64,40,41,38],[64,41,41,39,"type"],[64,45,41,43],[64,49,41,47],[64,61,41,59],[65,10,43,8,"formData"],[65,18,43,16],[65,19,43,17,"append"],[65,25,43,23],[65,26,43,24],[65,32,43,30],[65,34,43,32],[66,12,44,10,"uri"],[66,15,44,13],[66,17,44,15,"fileUri"],[66,24,44,22],[67,12,45,10,"name"],[67,16,45,14],[67,18,45,16,"filename"],[67,26,45,24],[68,12,46,10,"type"],[68,16,46,14],[68,18,46,16,"fileType"],[69,10,47,8],[69,11,47,9],[69,12,47,10],[70,8,48,6],[70,9,48,7],[70,15,48,13],[71,10,49,8],[72,10,50,8,"formData"],[72,18,50,16],[72,19,50,17,"append"],[72,25,50,23],[72,26,50,24],[72,32,50,30],[72,34,50,32,"postData"],[72,42,50,40],[72,43,50,41,"file"],[72,47,50,45],[72,48,50,46],[73,8,51,6],[74,6,52,4],[75,6,54,4,"console"],[75,13,54,11],[75,14,54,12,"log"],[75,17,54,15],[75,18,54,16],[75,47,54,45],[75,49,54,47],[76,8,55,6,"rating"],[76,14,55,12],[76,16,55,14,"postData"],[76,24,55,22],[76,25,55,23,"rating"],[76,31,55,29],[77,8,56,6,"review_text"],[77,19,56,17],[77,21,56,19,"postData"],[77,29,56,27],[77,30,56,28,"review_text"],[77,41,56,39],[78,8,57,6,"map_link"],[78,16,57,14],[78,18,57,16,"postData"],[78,26,57,24],[78,27,57,25,"map_link"],[78,35,57,33],[79,8,58,6,"file"],[79,12,58,10],[79,14,58,12,"postData"],[79,22,58,20],[79,23,58,21,"file"],[79,27,58,25],[79,29,58,27,"name"],[79,33,58,31],[79,37,58,35,"postData"],[79,45,58,43],[79,46,58,44,"file"],[79,50,58,48],[79,52,58,50,"uri"],[79,55,58,53],[79,59,58,57],[80,6,59,4],[80,7,59,5],[80,8,59,6],[81,6,61,4],[81,12,61,10,"response"],[81,20,61,18],[81,23,61,21],[81,29,61,27,"axios"],[81,34,61,32],[81,35,61,32,"default"],[81,42,61,32],[81,43,61,33,"post"],[81,47,61,37],[81,48,61,38],[81,51,61,41,"API_URL"],[81,58,61,48],[81,73,61,63],[81,75,61,65,"formData"],[81,83,61,73],[81,85,61,75],[82,8,62,6,"headers"],[82,15,62,13],[82,17,62,15],[83,10,63,8],[83,24,63,22],[83,26,63,24],[83,47,63,45],[84,10,64,8],[84,25,64,23],[84,27,64,25,"axios"],[84,32,64,30],[84,33,64,30,"default"],[84,40,64,30],[84,41,64,31,"defaults"],[84,49,64,39],[84,50,64,40,"headers"],[84,57,64,47],[84,58,64,48,"common"],[84,64,64,54],[84,65,64,55],[84,80,64,70],[85,8,65,6],[86,6,66,4],[86,7,66,5],[86,8,66,6],[87,6,68,4,"console"],[87,13,68,11],[87,14,68,12,"log"],[87,17,68,15],[87,18,68,16],[87,48,68,46],[87,50,68,48,"response"],[87,58,68,56],[87,59,68,57,"data"],[87,63,68,61],[87,64,68,62],[88,6,69,4],[88,13,69,11,"response"],[88,21,69,19],[88,22,69,20,"data"],[88,26,69,24],[89,4,70,2],[89,5,70,3],[89,6,70,4],[89,13,70,11,"error"],[89,18,70,16],[89,20,70,18],[90,6,71,4,"console"],[90,13,71,11],[90,14,71,12,"error"],[90,19,71,17],[90,20,71,18],[90,44,71,42],[90,46,71,44,"error"],[90,51,71,49],[90,52,71,50,"response"],[90,60,71,58],[90,62,71,60,"data"],[90,66,71,64],[90,70,71,68,"error"],[90,75,71,73],[90,76,71,74,"message"],[90,83,71,81],[90,84,71,82],[91,6,72,4],[91,12,72,10,"error"],[91,17,72,15],[92,4,73,2],[93,2,74,0],[93,3,74,1],[94,2,76,0],[94,6,76,0,"_default"],[94,14,76,0],[94,17,76,15,"api"],[94,20,76,18],[95,0,76,19],[95,3]],"functionMap":{"names":["<global>","createPost"],"mappings":"AAA;0BCqB;CDoD"},"hasCjsExports":false},"type":"js/module"}]}